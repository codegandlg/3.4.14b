<!DOCTYPE html>
<html>
	<head>
		<meta charset="utf-8" />
		<meta name="viewport" content="width=device-width,initial-scale=1,minimum-scale=1,maximum-scale=1,user-scalable=no" />
		<title></title>
		<meta id="i18n_pagename" content="index-common">
	    <meta name="keywords" content=""/>
	    <meta name="description" content=""/>
	    <meta http-equiv="Access-Control-Allow-Origin" content="*">
		<link rel="stylesheet" type="text/css" href="css/bootstrap/bootstrap.min.css"/>
		<link rel="stylesheet" type="text/css" href="css/libs/font-awesome.css"/>	
		<link href="css/bootstrap-switch.min.css" rel="stylesheet" />
		<link rel="stylesheet" type="text/css" href="css/base.css"/>
		<link rel="stylesheet" href="css/main.css" />
		<link type="image/x-icon" href="img/favicon.png" rel="shortcut icon"/>
		<script src="js/util_gw.js"></script>
	</head>
	<body>
		<div class="guest_net_parent">
			<form method="post" action="boafrm/formUpload" enctype="multipart/form-data" name="upload">
			<div class="softup_content">
				<div class="test"><span class="test_new i18n" name="test_new_zhu"></span></div>
				<div class="tips"><p class="i18n" name="tips_for_softwareup"></p></div>
				<div class="soft_up_selectversion">
					<div class="form-group_smart"><label class="i18n" name="version_softwareup"></label><input type="text" class="current_version" value="<% getInfo("fwVersion"); %>"/></div>
					<div class="form-group_smart"><label class="i18n" name="versionLocal_softwareup"></label>
						<input type="file" name="binary" id="file" style="display:none">
						<div class="input-append">  
						   <a class="btn btn-info i18n" onclick="$('input[id=file]').click();" name="fileupload_software" style="background-color: #89CEED;border-color: #89CEED;border-radius: 0;">
						   	<i class="icon-folder-open-alt"></i> 
						   </a>
						   <span id="uploadurl" class="input-large" ></span>
						</div><span class="i18n" name="Unselected_file" id="Unselected_file"></span>
			        </div>
					<!--<div class="form-group_smart tips_for_up_before"><div class="tips_for_up i18n" name="tips_for_up"></div></div>-->
					<div class="form-group_smart"><button class="fileupload_button i18n" onclick="sendClicked(this.form)" type="button" value="Upload" name="send"></button><button class="fileupload_button i18n" type="reset" value="Reset" name="reset"></button></div>
				</div>
			</div>
			<input type="hidden" value="/softwareup.html" name="submit-url">
			</form>
			<hr style="margin: 50px 0;"/>
			<div class="softup_content">
				<div class="test"><span class="test_new i18n" name="test_new_fllow"></span></div>
				<div class="tips"><p class="i18n" name="tips_for_softwareup2"></p></div>
				<div class="soft_up_selectversion">
					<div class="form-group_smart"><label class="i18n" name="version_softwareup"></label><input type="text" /></div>
					<div class="form-group_smart"><label class="i18n" name="versionLocal_softwareup"></label>
						<input type="file" name="binary" id="file2" style="display:none">
						<div class="input-append">  
						   <a class="btn btn-info i18n" onclick="$('input[id=file2]').click();" name="fileupload_software2" style="background-color: #89CEED;border-color: #89CEED;border-radius: 0;">
						   	<i class="icon-folder-open-alt"></i> 
						   </a>
						   <span id="uploadurl2" class="input-large" ></span>
						</div><span class="i18n" name="Unselected_file2" id="Unselected_file2"></span>
			        </div>
					<!--<div class="form-group_smart tips_for_up_before"><div class="tips_for_up i18n" name="tips_for_up"></div></div>-->
					<div class="form-group_smart"><button class="fileupload_button i18n" onclick="" type="button" value="Upload" name="send"></button><button class="fileupload_button i18n" type="reset" value="Reset" name="reset"></button></div>
				</div>
			</div>
		</div>
		<script src="js/jquery.js"></script>
		<script src="js/bootstrap.js"></script>
		<script src="js/bootstrap-switch.min.js"></script>
		<script src="js/jquery.cookie.js"></script>
	    <!-- 加载语言包文件 -->
	    <script src="js/jquery.i18n.properties.js"></script>
	    <script src="js/language.js"></script>
	    <script type="text/javascript">
	    	var i18nLanguage=getCookie('userLanguage');
	    $(".current_version").attr("disabled",true);
		$('input[id=file]').change(function() {
			var path = $(this).val();			
			path = path.split('\\');		
			path = path[path.length-1];
			$('#uploadurl').text(path);
			if($('#uploadurl').text()){
				$('#Unselected_file').text('');
			}else{
				if(i18nLanguage=='en'){
					$('#Unselected_file').text('Unselected file');
				}else{
					$('#Unselected_file').text('未选择文件');
				}
			}
			
		});
		$('input[id=file2]').change(function() {
			var path = $(this).val();			
			path = path.split('\\');		
			path = path[path.length-1];
			$('#uploadurl2').text(path);
			if($('#uploadurl2').text()){
				$('#Unselected_file2').text('');
			}else{
				if(i18nLanguage=='en'){
					$('#Unselected_file2').text('Unselected file');
				}else{
					$('#Unselected_file2').text('未选择文件');
				}
				
			}
			
		});
			var MWJ_progBar = 0;
			var time=0;
			var delay_time=1000;
			var loop_num=0;
			var usb_update_img_enabled=<%getIndex("usb_update_img_enabled");%>;
			var firmware_upgrade_acs_managed = <% getIndex("firmware_acs_managed"); %>;
			
			function getFileType(str)
			{
				if(str.value == "")
					return;
				var name = str.split(".");
				var type = name[name.length-1];
				return type;
			}
			function sendClicked(F)
			{
			  if(firmware_upgrade_acs_managed == 1)
			  {
			      document.upload.binary.focus();
			      if(i18nLanguage=='en'){
					alert('Firmware cannot be upgraded via web UI! ACS has been set up. Management server. Upgrade management is correct');
				  }else{
					alert('不能通过web UI升级固件！ ACS 已经设置.管理服务器.升级管理正确');
				  }
			      
			      return false;
			  }
			  if(document.upload.binary.value == ""){
			      	document.upload.binary.focus();
			      	if(i18nLanguage=='en'){
			      		alert('The filename cannot be empty');
			      	}else{
			      		alert('文件名不能为空');
			      	}
			  	
			  	return false;
			  }
			  
			  var fileType = getFileType(document.upload.binary.value);
			  if(fileType != "bin"){      	
			  	document.upload.binary.focus();
			  	if(i18nLanguage=='en'){
			      		alert('Invalid file format upload attempt');
			      	}else{
			      		alert('上传文件格式不正确');
			      	}
			  	
			  	return false;
			  }
			  F.submit();  
			}
		</script>
	</body>
</html>
